{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 1,
   "id": "3185be83",
   "metadata": {},
   "outputs": [],
   "source": [
    "\n",
    "import requests\n",
    "import json\n",
    "import pyodbc"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "id": "76d7a17a",
   "metadata": {},
   "outputs": [],
   "source": [
    "api_ = \"https://api.data.gov/ed/collegescorecard/v1/schools.json?school.degrees_awarded.predominant=2,3&fields=id,school.name,2013.student.size&api_key=YgIWNbjm9LyfefkanexPQSyeS0bEiFP2KBWpNeLp\""
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "id": "1b3d0a07",
   "metadata": {
    "scrolled": true
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Requirement already satisfied: prettytable in ./opt/anaconda3/lib/python3.9/site-packages (3.8.0)\n",
      "Requirement already satisfied: wcwidth in ./opt/anaconda3/lib/python3.9/site-packages (from prettytable) (0.2.5)\n",
      "Note: you may need to restart the kernel to use updated packages.\n"
     ]
    }
   ],
   "source": [
    "pip install prettytable"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "id": "b17fc8dd",
   "metadata": {},
   "outputs": [],
   "source": [
    "from prettytable import PrettyTable"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "id": "7d5af658",
   "metadata": {},
   "outputs": [],
   "source": [
    "page = 0\n",
    "all_results = []\n",
    "max_pages = 2"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "id": "ba688ef5",
   "metadata": {},
   "outputs": [],
   "source": [
    "while page < max_pages:\n",
    "    response = requests.get(api_)\n",
    "    data = response.json()\n",
    "    \n",
    "    results = data['results']\n",
    "    all_results.extend(results)\n",
    "    \n",
    "    if page >= data['metadata']['total']:\n",
    "        break\n",
    "    page += 1"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "id": "c9a8418b",
   "metadata": {},
   "outputs": [],
   "source": [
    "dtable = PrettyTable()\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "id": "c7046e6c",
   "metadata": {},
   "outputs": [],
   "source": [
    "dtable.field_names = ['ID','School Name','Student Size (2013)']"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "7d67b101",
   "metadata": {},
   "outputs": [],
   "source": []
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "id": "53a2dfd1",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "+--------+------------------------------------------------+---------------------+\n",
      "|   ID   |                  School Name                   | Student Size (2013) |\n",
      "+--------+------------------------------------------------+---------------------+\n",
      "| 100654 |            Alabama A & M University            |         4051        |\n",
      "| 100663 |      University of Alabama at Birmingham       |        11200        |\n",
      "| 100690 |               Amridge University               |         322         |\n",
      "| 100706 |      University of Alabama in Huntsville       |         5525        |\n",
      "| 100724 |            Alabama State University            |         5354        |\n",
      "| 100751 |           The University of Alabama            |        28692        |\n",
      "| 100760 |       Central Alabama Community College        |         1779        |\n",
      "| 100812 |            Athens State University             |         2999        |\n",
      "| 100830 |        Auburn University at Montgomery         |         4322        |\n",
      "| 100858 |               Auburn University                |        19761        |\n",
      "| 100937 |          Birmingham-Southern College           |         1181        |\n",
      "| 101116 |          South University-Montgomery           |         599         |\n",
      "| 101143 |       Enterprise State Community College       |         1984        |\n",
      "| 101161 |       Coastal Alabama Community College        |         4182        |\n",
      "| 101189 |              Faulkner University               |         2358        |\n",
      "| 101240 |        Gadsden State Community College         |         5480        |\n",
      "| 101301 | George C Wallace State Community College-Selma |         1604        |\n",
      "| 101435 |               Huntingdon College               |         1100        |\n",
      "| 101453 |         Heritage Christian University          |          67         |\n",
      "| 101480 |         Jacksonville State University          |         7195        |\n",
      "| 100654 |            Alabama A & M University            |         4051        |\n",
      "| 100663 |      University of Alabama at Birmingham       |        11200        |\n",
      "| 100690 |               Amridge University               |         322         |\n",
      "| 100706 |      University of Alabama in Huntsville       |         5525        |\n",
      "| 100724 |            Alabama State University            |         5354        |\n",
      "| 100751 |           The University of Alabama            |        28692        |\n",
      "| 100760 |       Central Alabama Community College        |         1779        |\n",
      "| 100812 |            Athens State University             |         2999        |\n",
      "| 100830 |        Auburn University at Montgomery         |         4322        |\n",
      "| 100858 |               Auburn University                |        19761        |\n",
      "| 100937 |          Birmingham-Southern College           |         1181        |\n",
      "| 101116 |          South University-Montgomery           |         599         |\n",
      "| 101143 |       Enterprise State Community College       |         1984        |\n",
      "| 101161 |       Coastal Alabama Community College        |         4182        |\n",
      "| 101189 |              Faulkner University               |         2358        |\n",
      "| 101240 |        Gadsden State Community College         |         5480        |\n",
      "| 101301 | George C Wallace State Community College-Selma |         1604        |\n",
      "| 101435 |               Huntingdon College               |         1100        |\n",
      "| 101453 |         Heritage Christian University          |          67         |\n",
      "| 101480 |         Jacksonville State University          |         7195        |\n",
      "+--------+------------------------------------------------+---------------------+\n"
     ]
    }
   ],
   "source": [
    "for result in all_results:\n",
    "    school_id = result['id']\n",
    "    school_name = result['school.name']\n",
    "    school_size = result['2013.student.size']\n",
    "    dtable.add_row([school_id,school_name,school_size])\n",
    "print(dtable)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "e8c325ef",
   "metadata": {},
   "outputs": [],
   "source": []
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "f29f75d8",
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3 (ipykernel)",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.9.13"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 5
}
